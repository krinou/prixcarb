<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>Stations – Classement pondéré depuis Nanterre</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
  table { border-collapse: collapse; width: 100%; background: #fff; margin-top: 20px; }
  th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
  th { background: #eee; }
  .loading { font-size: 18px; color: #555; }
  .error { color: #b00020; font-weight: bold; white-space: pre-wrap; }
</style>
</head>
<body>

<h1>⛽ Classement des stations pondéré (E10) – Nanterre</h1>
<div id="status" class="loading">⏳ Chargement…</div>

<table id="table" style="display:none;">
  <thead>
    <tr>
      <th>Rang</th><th>Station</th><th>Adresse</th><th>CP</th>
      <th>Ville</th><th>Prix (€/L)</th><th>Distance (km)</th><th>Coût total (€)</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
async function charger() {
  const res = await fetch("stations.json");
  const rows = await res.json();

  const tbody = document.querySelector("#table tbody");
  tbody.innerHTML = "";

  rows.sort((a,b)=>a.coutTotal - b.coutTotal);

  rows.forEach((r, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${r.station}</td>
      <td>${r.cp}</td>
      <td>${r.ville}</td>
      <td>${r.prix.toFixed(3)}</td>
      <td>${r.distance.toFixed(2)}</td>
      <td>${r.coutTotal.toFixed(2)}</td>`;
    tbody.appendChild(tr);
  });

  document.getElementById("status").style.display = "none";
  document.getElementById("table").style.display = "table";
}
charger();
</script>
</body>
</html>
